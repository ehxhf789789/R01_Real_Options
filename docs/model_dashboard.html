<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BIM Real Options Valuation - Model Architecture Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #1976D2;
            --secondary: #424242;
            --success: #388E3C;
            --warning: #F57C00;
            --danger: #D32F2F;
            --info: #0288D1;
            --purple: #7B1FA2;
            --teal: #00838F;
            --tier0: #2196F3;
            --tier1: #4CAF50;
            --tier2: #FF9800;
            --npv: #2196F3;
            --rov: #4CAF50;
            --tpv: #9C27B0;
            --bg-light: #FAFAFA;
            --bg-card: #FFFFFF;
            --text-dark: #212121;
            --text-secondary: #757575;
            --border: #E0E0E0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-light);
            color: var(--text-dark);
            line-height: 1.6;
        }

        .header {
            background: linear-gradient(135deg, var(--primary), var(--info));
            color: white;
            padding: 20px 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            background: var(--bg-card);
            border-bottom: 2px solid var(--border);
            overflow-x: auto;
            padding: 0 20px;
        }

        .nav-tab {
            padding: 15px 25px;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .nav-tab:hover {
            color: var(--primary);
            background: rgba(25, 118, 210, 0.05);
        }

        .nav-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .content {
            padding: 30px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .section-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text-dark);
        }

        .section-desc {
            color: var(--text-secondary);
            margin-bottom: 25px;
            font-size: 15px;
        }

        .card {
            background: var(--bg-card);
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            padding: 25px;
            margin-bottom: 25px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-title .badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            color: white;
        }

        .badge-tier0 { background: var(--tier0); }
        .badge-tier1 { background: var(--tier1); }
        .badge-tier2 { background: var(--tier2); }
        .badge-npv { background: var(--npv); }
        .badge-rov { background: var(--rov); }
        .badge-tpv { background: var(--tpv); }

        /* Architecture Diagram */
        .architecture-diagram {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            align-items: stretch;
            padding: 30px 0;
        }

        .arch-box {
            padding: 20px;
            border-radius: 12px;
            min-width: 180px;
            text-align: center;
        }

        .arch-box h4 {
            font-size: 14px;
            margin-bottom: 8px;
        }

        .arch-box ul {
            list-style: none;
            font-size: 12px;
            text-align: left;
        }

        .arch-box ul li {
            padding: 2px 0;
        }

        .arch-arrow {
            display: flex;
            align-items: center;
            font-size: 24px;
            color: var(--secondary);
        }

        .box-input { background: rgba(33, 150, 243, 0.15); border: 2px solid var(--tier0); }
        .box-tier1 { background: rgba(76, 175, 80, 0.15); border: 2px solid var(--tier1); }
        .box-tier2 { background: rgba(255, 152, 0, 0.15); border: 2px solid var(--tier2); }
        .box-mc { background: rgba(123, 31, 162, 0.15); border: 2px solid var(--purple); }
        .box-rov { background: rgba(76, 175, 80, 0.15); border: 2px solid var(--rov); }
        .box-output { background: rgba(156, 39, 176, 0.15); border: 2px solid var(--tpv); }

        /* Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        .data-table th, .data-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .data-table th {
            background: var(--primary);
            color: white;
            font-weight: 500;
        }

        .data-table tr:hover {
            background: rgba(25, 118, 210, 0.05);
        }

        /* Formula boxes */
        .formula-box {
            background: linear-gradient(135deg, #f5f5f5, #e8e8e8);
            border-left: 4px solid var(--tpv);
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
            font-family: 'Courier New', monospace;
        }

        .formula-main {
            font-size: 20px;
            font-weight: bold;
            color: var(--tpv);
            margin-bottom: 10px;
        }

        .formula-detail {
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* Options grid */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .option-card {
            background: var(--bg-card);
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid var(--rov);
        }

        .option-card h4 {
            color: var(--primary);
            margin-bottom: 10px;
        }

        .option-card .formula {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            margin: 10px 0;
        }

        .option-card .desc {
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* Decision categories */
        .decision-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .decision-card {
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            color: white;
        }

        .decision-card.strong { background: var(--success); }
        .decision-card.participate { background: #81C784; }
        .decision-card.conditional { background: var(--warning); }
        .decision-card.reject { background: var(--danger); }

        .decision-card h4 {
            font-size: 14px;
            margin-bottom: 8px;
        }

        .decision-card p {
            font-size: 11px;
            opacity: 0.9;
        }

        /* Code blocks */
        .code-block {
            background: #263238;
            color: #ECEFF1;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            overflow-x: auto;
            white-space: pre;
        }

        /* Example section */
        .example-step {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            align-items: flex-start;
        }

        .step-number {
            width: 40px;
            height: 40px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-content h4 {
            color: var(--primary);
            margin-bottom: 10px;
        }

        /* Chart container */
        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }

        /* Tier flow */
        .tier-flow {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 30px;
            background: linear-gradient(90deg, rgba(33,150,243,0.1), rgba(76,175,80,0.1), rgba(255,152,0,0.1));
            border-radius: 12px;
            margin: 20px 0;
        }

        .tier-box {
            flex: 1;
            max-width: 280px;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .tier-box h4 {
            margin-bottom: 10px;
        }

        .tier-box ul {
            text-align: left;
            font-size: 13px;
        }

        .tier-arrow {
            font-size: 30px;
            color: var(--secondary);
        }

        /* Features list */
        .features-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 15px;
        }

        .feature-item {
            display: flex;
            gap: 15px;
            padding: 15px;
            background: rgba(25, 118, 210, 0.05);
            border-radius: 8px;
        }

        .feature-icon {
            width: 40px;
            height: 40px;
            background: var(--primary);
            color: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .feature-text h4 {
            color: var(--primary);
            font-size: 14px;
            margin-bottom: 5px;
        }

        .feature-text p {
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .decision-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .tier-flow {
                flex-direction: column;
                gap: 20px;
            }

            .tier-arrow {
                transform: rotate(90deg);
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>BIM Real Options Valuation System</h1>
        <p>Model Architecture Dashboard - Comprehensive System Documentation</p>
    </div>

    <div class="nav-tabs">
        <button class="nav-tab active" onclick="showTab('overview')">1. System Overview</button>
        <button class="nav-tab" onclick="showTab('input')">2. Input Variables</button>
        <button class="nav-tab" onclick="showTab('tier')">3. Tier System</button>
        <button class="nav-tab" onclick="showTab('valuation')">4. Valuation Model</button>
        <button class="nav-tab" onclick="showTab('options')">5. Real Options</button>
        <button class="nav-tab" onclick="showTab('output')">6. Output & Decisions</button>
        <button class="nav-tab" onclick="showTab('example')">7. Example Analysis</button>
    </div>

    <div class="content">
        <!-- TAB 1: System Overview -->
        <div id="overview" class="tab-content active">
            <h2 class="section-title">System Architecture Overview</h2>
            <p class="section-desc">This dashboard explains the complete architecture of the BIM Real Options Valuation System, from input processing through Monte Carlo simulation to final bid decision recommendations.</p>

            <div class="card">
                <div class="card-title">System Flow Diagram</div>
                <div class="architecture-diagram">
                    <div class="arch-box box-input">
                        <h4>üì• INPUT (Tier 0)</h4>
                        <ul>
                            <li>‚Ä¢ Project ID</li>
                            <li>‚Ä¢ Contract Amount</li>
                            <li>‚Ä¢ Infra Type</li>
                            <li>‚Ä¢ Design Phase</li>
                            <li>‚Ä¢ Duration</li>
                            <li>‚Ä¢ Procurement</li>
                            <li>‚Ä¢ Client Type</li>
                        </ul>
                    </div>
                    <div class="arch-arrow">‚Üí</div>
                    <div class="arch-box box-tier1">
                        <h4>üîÑ DERIVATION (Tier 1)</h4>
                        <ul>
                            <li>‚Ä¢ has_follow_on</li>
                            <li>‚Ä¢ complexity</li>
                            <li>‚Ä¢ competition_params</li>
                            <li>‚Ä¢ n_milestones</li>
                            <li>‚Ä¢ client_reliability</li>
                        </ul>
                    </div>
                    <div class="arch-arrow">‚Üí</div>
                    <div class="arch-box box-tier2">
                        <h4>üé≤ SAMPLING (Tier 2)</h4>
                        <ul>
                            <li>‚Ä¢ cost_ratio</li>
                            <li>‚Ä¢ follow_on_prob</li>
                            <li>‚Ä¢ volatility</li>
                            <li>‚Ä¢ strategic_alignment</li>
                            <li>‚Ä¢ capability_level</li>
                        </ul>
                    </div>
                    <div class="arch-arrow">‚Üí</div>
                    <div class="arch-box box-mc">
                        <h4>‚öôÔ∏è MONTE CARLO</h4>
                        <ul>
                            <li>‚Ä¢ 5,000 Iterations</li>
                            <li>‚Ä¢ NPV Calculation</li>
                            <li>‚Ä¢ 7 ROV Options</li>
                            <li>‚Ä¢ 3 Adjustments</li>
                            <li>‚Ä¢ TPV Distribution</li>
                        </ul>
                    </div>
                    <div class="arch-arrow">‚Üí</div>
                    <div class="arch-box box-output">
                        <h4>üìä OUTPUT</h4>
                        <ul>
                            <li>‚Ä¢ TPV = NPV + ROV</li>
                            <li>‚Ä¢ Decision Probabilities</li>
                            <li>‚Ä¢ Robustness Metrics</li>
                            <li>‚Ä¢ Bid Recommendation</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-title">Key System Features</div>
                <div class="features-list">
                    <div class="feature-item">
                        <div class="feature-icon">üìä</div>
                        <div class="feature-text">
                            <h4>3-Tier Input System</h4>
                            <p>Transforms 7 basic inputs into probabilistic parameters through deterministic derivation</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">üé≤</div>
                        <div class="feature-text">
                            <h4>Monte Carlo Simulation</h4>
                            <p>5,000 iterations to capture uncertainty in cost ratios, competition, and strategic factors</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">üíé</div>
                        <div class="feature-text">
                            <h4>7 Real Options Valuation</h4>
                            <p>Follow-on, Capability, Resource, Abandonment, Contract, Switch, Stage options</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">‚öñÔ∏è</div>
                        <div class="feature-text">
                            <h4>3 Adjustment Factors</h4>
                            <p>Interaction effects, Risk premium, and Deferral costs for realistic ROV estimation</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">‚úÖ</div>
                        <div class="feature-text">
                            <h4>Decision Support</h4>
                            <p>Probability-based recommendations with robustness metrics for informed bid decisions</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="formula-box">
                <div class="formula-main">TPV = NPV + ROV_net</div>
                <div class="formula-detail">
ROV_net = Œ£(7 Options) √ó (1 - Interaction) √ó (1 - Risk Premium) - Deferral Cost
                </div>
            </div>
        </div>

        <!-- TAB 2: Input Variables -->
        <div id="input" class="tab-content">
            <h2 class="section-title">Tier 0: Input Variables</h2>
            <p class="section-desc">These 7 variables can be directly extracted from project bid announcements. They form the foundation for all subsequent derivations and valuations.</p>

            <div class="card">
                <div class="card-title">Input Variable Specifications <span class="badge badge-tier0">7 Required Fields</span></div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Variable</th>
                            <th>Data Type</th>
                            <th>Format/Range</th>
                            <th>Example</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>project_id</code></td>
                            <td>String</td>
                            <td>Alphanumeric</td>
                            <td>R01</td>
                            <td>Unique project identifier</td>
                        </tr>
                        <tr>
                            <td><code>contract_amount</code></td>
                            <td>Float</td>
                            <td>Million KRW</td>
                            <td>520</td>
                            <td>Total contract value in millions</td>
                        </tr>
                        <tr>
                            <td><code>infra_type</code></td>
                            <td>Categorical</td>
                            <td>Road / Bridge / Tunnel</td>
                            <td>Road</td>
                            <td>Infrastructure category</td>
                        </tr>
                        <tr>
                            <td><code>design_phase</code></td>
                            <td>Categorical</td>
                            <td>Basic Design / Detailed Design</td>
                            <td>Basic Design</td>
                            <td>Current design stage</td>
                        </tr>
                        <tr>
                            <td><code>contract_duration</code></td>
                            <td>Float</td>
                            <td>Years (0.5 - 3.0)</td>
                            <td>1.8</td>
                            <td>Project duration in years</td>
                        </tr>
                        <tr>
                            <td><code>procurement_type</code></td>
                            <td>Categorical</td>
                            <td>Open / Limited / Negotiated</td>
                            <td>Limited</td>
                            <td>Bidding competition type</td>
                        </tr>
                        <tr>
                            <td><code>client_type</code></td>
                            <td>Categorical</td>
                            <td>Central / Public Corp / Local</td>
                            <td>Central</td>
                            <td>Client organization type</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="card">
                <div class="card-title">Sample Input Data (10 Projects)</div>
                <div class="chart-container">
                    <canvas id="inputChart"></canvas>
                </div>
            </div>
        </div>

        <!-- TAB 3: Tier System -->
        <div id="tier" class="tab-content">
            <h2 class="section-title">3-Tier Input Transformation System</h2>
            <p class="section-desc">The system transforms simple bid announcement data into rich probabilistic parameters through a 3-tier hierarchy: Deterministic ‚Üí Derived ‚Üí Probabilistic</p>

            <div class="tier-flow">
                <div class="tier-box box-input">
                    <h4 style="color: var(--tier0);">TIER 0</h4>
                    <p style="font-size: 12px; margin-bottom: 10px;">Raw Input (Deterministic)</p>
                    <ul>
                        <li>‚Ä¢ project_id</li>
                        <li>‚Ä¢ contract_amount</li>
                        <li>‚Ä¢ infra_type</li>
                        <li>‚Ä¢ design_phase</li>
                        <li>‚Ä¢ contract_duration</li>
                        <li>‚Ä¢ procurement_type</li>
                        <li>‚Ä¢ client_type</li>
                    </ul>
                </div>
                <div class="tier-arrow">‚Üí</div>
                <div class="tier-box box-tier1">
                    <h4 style="color: var(--tier1);">TIER 1</h4>
                    <p style="font-size: 12px; margin-bottom: 10px;">Derived (Deterministic)</p>
                    <ul>
                        <li>‚Ä¢ has_follow_on</li>
                        <li>‚Ä¢ complexity</li>
                        <li>‚Ä¢ competition_params</li>
                        <li>‚Ä¢ n_milestones</li>
                        <li>‚Ä¢ follow_on_beta_params</li>
                        <li>‚Ä¢ client_reliability</li>
                    </ul>
                </div>
                <div class="tier-arrow">‚Üí</div>
                <div class="tier-box box-tier2">
                    <h4 style="color: var(--tier2);">TIER 2</h4>
                    <p style="font-size: 12px; margin-bottom: 10px;">Sampled (Probabilistic)</p>
                    <ul>
                        <li>‚Ä¢ cost_ratio ~ Triangular</li>
                        <li>‚Ä¢ follow_on_prob ~ Beta</li>
                        <li>‚Ä¢ volatility ~ Normal</li>
                        <li>‚Ä¢ competition_level ~ Normal</li>
                        <li>‚Ä¢ strategic_alignment ~ Uniform</li>
                        <li>‚Ä¢ capability_level ~ Triangular</li>
                    </ul>
                </div>
            </div>

            <div class="card">
                <div class="card-title">Tier 1 Derivation Rules</div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Tier 0 Input</th>
                            <th>Tier 1 Output</th>
                            <th>Derivation Logic</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>design_phase</td>
                            <td>has_follow_on</td>
                            <td>True if "Basic Design", else False</td>
                        </tr>
                        <tr>
                            <td>infra_type + amount</td>
                            <td>complexity</td>
                            <td>Tunnel=high, Bridge=medium, Road=low (+1 level if amount ‚â• 300M)</td>
                        </tr>
                        <tr>
                            <td>procurement_type</td>
                            <td>competition_params</td>
                            <td>Open: Œº=0.6, œÉ=0.15 | Limited: Œº=0.4, œÉ=0.10 | Negotiated: Œº=0.2, œÉ=0.05</td>
                        </tr>
                        <tr>
                            <td>infra_type</td>
                            <td>n_milestones</td>
                            <td>Road=3, Bridge=3, Tunnel=4</td>
                        </tr>
                        <tr>
                            <td>design_phase</td>
                            <td>follow_on_beta_params</td>
                            <td>Basic: Beta(4,2), Detailed: Beta(1.5,4)</td>
                        </tr>
                        <tr>
                            <td>client_type</td>
                            <td>client_reliability</td>
                            <td>Central=0.9, Public Corp=0.8, Local=0.6</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="card">
                <div class="card-title">Tier 2 Probability Distributions</div>
                <div class="chart-container" style="height: 350px;">
                    <canvas id="distributionChart"></canvas>
                </div>
            </div>
        </div>

        <!-- TAB 4: Valuation Model -->
        <div id="valuation" class="tab-content">
            <h2 class="section-title">Monte Carlo Valuation Engine</h2>
            <p class="section-desc">The valuation engine performs 5,000 Monte Carlo iterations to generate TPV distributions and decision probabilities.</p>

            <div class="card">
                <div class="card-title">NPV Calculation <span class="badge badge-npv">Traditional Method</span></div>
                <div class="formula-box">
                    <div class="formula-main">NPV = Contract Amount √ó (1 - Cost Ratio) √ó Discount Factor</div>
                    <div class="formula-detail">
Where:
  ‚Ä¢ Contract Amount: From Tier 0 input (Million KRW)
  ‚Ä¢ Cost Ratio: Sampled from Triangular(0.75, 0.85, 1.05)
  ‚Ä¢ Discount Factor: exp(-r √ó T) where r = 9%, T = contract duration

Example: Contract = 520M, Cost Ratio = 0.82, Duration = 1.8 years
         NPV = 520 √ó (1 - 0.82) √ó exp(-0.09 √ó 1.8) = 520 √ó 0.18 √ó 0.85 = 79.56M
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-title">Total Project Value (TPV) Formula <span class="badge badge-tpv">Enhanced Method</span></div>
                <div class="formula-box">
                    <div class="formula-main">TPV = NPV + ROV_net</div>
                    <div class="formula-detail">
ROV_net = ROV_gross - Interaction - Risk Premium - Deferral

ROV_gross = Follow-on + Capability + Resource + Abandonment + Contract + Switch + Stage

Adjustments:
  ‚Ä¢ Interaction = 12% √ó ROV_gross (overlapping option effects)
  ‚Ä¢ Risk Premium = 15% √ó ROV_gross (uncertainty penalty)
  ‚Ä¢ Deferral = 5% √ó ROV_gross √ó T (time value cost)
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-title">Monte Carlo Simulation Process</div>
                <div class="code-block">FOR each iteration i = 1 to 5,000:

  1. SAMPLE Tier 2 parameters from probability distributions
     ‚Ä¢ cost_ratio[i] ~ Triangular(0.75, 0.85, 1.05)
     ‚Ä¢ follow_on_prob[i] ~ Beta(Œ±, Œ≤)  # from Tier 1
     ‚Ä¢ volatility[i] ~ Normal(0.25, 0.05)
     ‚Ä¢ strategic_alignment[i] ~ Uniform(0.3, 0.9)
     ‚Ä¢ ... other parameters

  2. CALCULATE NPV[i]
     NPV[i] = Contract √ó (1 - cost_ratio[i]) √ó exp(-r √ó T)

  3. CALCULATE each Real Option value
     ROV_follow_on[i], ROV_capability[i], ... ROV_stage[i]

  4. APPLY adjustments
     ROV_net[i] = Œ£(options) √ó (1 - 0.12) √ó (1 - 0.15) - deferral

  5. COMPUTE TPV[i] = NPV[i] + ROV_net[i]

END FOR

OUTPUT: Distribution of 5,000 TPV values ‚Üí Decision probabilities</div>
            </div>
        </div>

        <!-- TAB 5: Real Options -->
        <div id="options" class="tab-content">
            <h2 class="section-title">7 Real Options Valuation</h2>
            <p class="section-desc">Each option represents a different type of managerial flexibility that adds strategic value beyond NPV.</p>

            <div class="card">
                <div class="card-title">ROV Composition (Typical Distribution)</div>
                <div class="chart-container">
                    <canvas id="rovChart"></canvas>
                </div>
            </div>

            <div class="card">
                <div class="card-title">Real Options Valuation Formulas <span class="badge badge-rov">7 Options</span></div>
                <div class="options-grid">
                    <div class="option-card" style="border-color: #1976D2;">
                        <h4>1. Follow-on Option</h4>
                        <div class="formula">Contract √ó Follow_on_Prob √ó Multiplier(1.5~2.5) √ó Exercise_Rate(0.50)</div>
                        <p class="desc">Captures value of potential follow-on design projects (e.g., detailed design after basic design)</p>
                    </div>
                    <div class="option-card" style="border-color: #388E3C;">
                        <h4>2. Capability Option</h4>
                        <div class="formula">Contract √ó Strategic_Alignment √ó Capability_Level √ó Growth_Rate(0.10)</div>
                        <p class="desc">Value of building BIM expertise that can be leveraged in future projects</p>
                    </div>
                    <div class="option-card" style="border-color: #7B1FA2;">
                        <h4>3. Resource Option</h4>
                        <div class="formula">Contract √ó Resource_Utilization √ó Premium(0.06)</div>
                        <p class="desc">Flexibility value from workforce allocation and utilization efficiency</p>
                    </div>
                    <div class="option-card" style="border-color: #C62828;">
                        <h4>4. Abandonment Option</h4>
                        <div class="formula">max(0, Loss) √ó Recovery_Rate</div>
                        <p class="desc">Right to exit unprofitable projects and recover partial investment</p>
                    </div>
                    <div class="option-card" style="border-color: #F57C00;">
                        <h4>5. Contract Option</h4>
                        <div class="formula">Contract √ó Flexibility √ó Flex_Rate(0.05)</div>
                        <p class="desc">Option to modify scope, terms, or deliverables during project execution</p>
                    </div>
                    <div class="option-card" style="border-color: #00838F;">
                        <h4>6. Switch Option</h4>
                        <div class="formula">Contract √ó Mobility √ó Switch_Rate(0.04)</div>
                        <p class="desc">Ability to pivot between technologies or methodologies (e.g., BIM levels)</p>
                    </div>
                    <div class="option-card" style="border-color: #5D4037;">
                        <h4>7. Stage Option</h4>
                        <div class="formula">Contract √ó (1/N_Milestones) √ó Checkpoint_Value(0.03)</div>
                        <p class="desc">Value of phased investment with go/no-go decisions at each milestone</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB 6: Output & Decisions -->
        <div id="output" class="tab-content">
            <h2 class="section-title">Output Metrics & Decision Framework</h2>
            <p class="section-desc">The system produces comprehensive output metrics and probability-based decision recommendations.</p>

            <div class="card">
                <div class="card-title">Decision Categories</div>
                <div class="decision-grid">
                    <div class="decision-card strong">
                        <h4>Strong Participate</h4>
                        <p>TPV > NPV√ó1.5 AND TPV > 30M</p>
                        <p style="margin-top: 8px;">Highly recommended</p>
                    </div>
                    <div class="decision-card participate">
                        <h4>Participate</h4>
                        <p>NPV√ó1.05 < TPV ‚â§ NPV√ó1.5</p>
                        <p style="margin-top: 8px;">Recommended</p>
                    </div>
                    <div class="decision-card conditional">
                        <h4>Conditional</h4>
                        <p>NPV√ó0.80 < TPV ‚â§ NPV√ó1.05</p>
                        <p style="margin-top: 8px;">Caution advised</p>
                    </div>
                    <div class="decision-card reject">
                        <h4>Reject</h4>
                        <p>TPV ‚â§ NPV√ó0.80 OR TPV ‚â§ 0</p>
                        <p style="margin-top: 8px;">Not recommended</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-title">Output Metrics</div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Metric</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td><code>NPV</code></td><td>Traditional Net Present Value (deterministic)</td></tr>
                        <tr><td><code>ROV_gross</code></td><td>Sum of 7 real option values before adjustments</td></tr>
                        <tr><td><code>ROV_net</code></td><td>ROV after interaction, risk premium, deferral adjustments</td></tr>
                        <tr><td><code>TPV</code></td><td>Total Project Value = NPV + ROV_net</td></tr>
                        <tr><td><code>TPV_CI_lower (5%)</code></td><td>5th percentile of Monte Carlo TPV distribution</td></tr>
                        <tr><td><code>TPV_CI_upper (95%)</code></td><td>95th percentile of Monte Carlo TPV distribution</td></tr>
                        <tr><td><code>prob_strong_participate</code></td><td>P(Strong Participate) from Monte Carlo</td></tr>
                        <tr><td><code>prob_participate</code></td><td>P(Participate) from Monte Carlo</td></tr>
                        <tr><td><code>prob_conditional</code></td><td>P(Conditional) from Monte Carlo</td></tr>
                        <tr><td><code>prob_reject</code></td><td>P(Reject) from Monte Carlo</td></tr>
                        <tr><td><code>decision_robustness</code></td><td>Probability of the most likely decision category</td></tr>
                        <tr><td><code>npv_decision</code></td><td>Decision based on NPV alone (Participate if NPV > 0)</td></tr>
                        <tr><td><code>tpv_decision</code></td><td>Decision based on TPV distribution (highest probability)</td></tr>
                        <tr><td><code>decision_changed</code></td><td>Whether NPV and TPV decisions differ</td></tr>
                        <tr><td><code>decision_direction</code></td><td>Up (Reject‚ÜíParticipate) or Down (Participate‚ÜíReject)</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- TAB 7: Example Analysis -->
        <div id="example" class="tab-content">
            <h2 class="section-title">Complete Example: Project R01 Analysis</h2>
            <p class="section-desc">Step-by-step walkthrough of the valuation process for a sample project.</p>

            <div class="example-step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <h4>Input Data (Tier 0)</h4>
                    <div class="card" style="margin-top: 10px;">
                        <table class="data-table">
                            <tr><td width="200"><strong>project_id</strong></td><td>R01</td></tr>
                            <tr><td><strong>contract_amount</strong></td><td>520 Million KRW</td></tr>
                            <tr><td><strong>infra_type</strong></td><td>Road</td></tr>
                            <tr><td><strong>design_phase</strong></td><td>Basic Design</td></tr>
                            <tr><td><strong>contract_duration</strong></td><td>1.8 years</td></tr>
                            <tr><td><strong>procurement_type</strong></td><td>Limited</td></tr>
                            <tr><td><strong>client_type</strong></td><td>Central</td></tr>
                        </table>
                    </div>
                </div>
            </div>

            <div class="example-step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <h4>Tier Transformation</h4>
                    <div class="card" style="margin-top: 10px;">
                        <div class="code-block">Tier 1 Derivation:
  ‚Ä¢ has_follow_on = True (Basic Design ‚Üí follow-on possible)
  ‚Ä¢ complexity = "medium" (Road + amount >= 300M ‚Üí upgrade from low)
  ‚Ä¢ competition_params = {mean: 0.4, std: 0.10} (Limited competition)
  ‚Ä¢ n_milestones = 3 (Road infrastructure)
  ‚Ä¢ follow_on_beta_params = (4, 2) (Basic Design ‚Üí high follow-on probability)
  ‚Ä¢ client_reliability = 0.9 (Central government client)

Tier 2 Sample (one iteration):
  ‚Ä¢ cost_ratio = 0.82 (sampled from Triangular)
  ‚Ä¢ follow_on_prob = 0.68 (sampled from Beta(4,2))
  ‚Ä¢ volatility = 0.27 (sampled from Normal)
  ‚Ä¢ strategic_alignment = 0.72 (sampled from Uniform)
  ‚Ä¢ capability_level = 0.58 (sampled from Triangular)
  ‚Ä¢ competition_level = 0.38 (sampled from Normal)</div>
                    </div>
                </div>
            </div>

            <div class="example-step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <h4>Valuation Results (Monte Carlo Mean)</h4>
                    <div class="card" style="margin-top: 10px;">
                        <div class="chart-container">
                            <canvas id="exampleChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <div class="example-step">
                <div class="step-number">4</div>
                <div class="step-content">
                    <h4>Decision Recommendation</h4>
                    <div class="card" style="margin-top: 10px; background: linear-gradient(135deg, rgba(56, 142, 60, 0.1), rgba(56, 142, 60, 0.05));">
                        <div class="code-block" style="background: transparent; color: var(--text-dark);">Decision Analysis for Project R01
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

NPV Decision:      Participate (NPV = 79.56M > 0)
TPV Decision:      Strong Participate (highest probability)
Decision Changed:  No (both recommend participation)

Decision Probabilities:
  ‚Ä¢ Strong Participate: 68.4%  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë
  ‚Ä¢ Participate:        24.2%  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë
  ‚Ä¢ Conditional:         5.8%  ‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë
  ‚Ä¢ Reject:              1.6%  ‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë

Robustness: 68.4% (HIGH confidence)
90% CI: [85.32M, 139.50M]

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
RECOMMENDATION: <span style="color: var(--success); font-weight: bold;">STRONG PARTICIPATE</span>

Real options analysis confirms NPV decision with high confidence.
The ROV of 32.85M (6.3% of contract) adds significant strategic value
primarily from Follow-on Option (17.68M) due to Basic Design phase.</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(btn => btn.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        // Charts initialization
        document.addEventListener('DOMContentLoaded', function() {
            // Input Chart
            const inputCtx = document.getElementById('inputChart').getContext('2d');
            new Chart(inputCtx, {
                type: 'bar',
                data: {
                    labels: ['R01', 'R02', 'R03', 'R04', 'R05', 'R06', 'R07', 'R08', 'R09', 'R10'],
                    datasets: [{
                        label: 'Contract Amount (M KRW)',
                        data: [520, 180, 280, 450, 120, 95, 680, 220, 850, 320],
                        backgroundColor: [
                            '#2196F3', '#2196F3', '#2196F3',  // Road
                            '#4CAF50', '#4CAF50', '#4CAF50',  // Bridge
                            '#FF9800', '#FF9800', '#FF9800', '#FF9800'  // Tunnel
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        title: { display: true, text: 'Sample Input: Contract Amounts by Infrastructure Type' }
                    },
                    scales: {
                        y: { beginAtZero: true, title: { display: true, text: 'Million KRW' } }
                    }
                }
            });

            // Distribution Chart
            const distCtx = document.getElementById('distributionChart').getContext('2d');
            new Chart(distCtx, {
                type: 'bar',
                data: {
                    labels: ['Cost Ratio\n(Triangular)', 'Follow-on Prob\n(Beta)', 'Volatility\n(Normal)', 'Competition\n(Normal)', 'Strategic Align\n(Uniform)', 'Capability\n(Triangular)'],
                    datasets: [{
                        label: 'Distribution Type',
                        data: [0.85, 0.67, 0.25, 0.4, 0.6, 0.55],
                        backgroundColor: ['#FF9800', '#4CAF50', '#7B1FA2', '#D32F2F', '#0288D1', '#00838F']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: { display: false },
                        title: { display: true, text: 'Tier 2 Parameters (Mean Values)' }
                    },
                    scales: {
                        x: { beginAtZero: true, max: 1 }
                    }
                }
            });

            // ROV Chart
            const rovCtx = document.getElementById('rovChart').getContext('2d');
            new Chart(rovCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Follow-on (35%)', 'Capability (25%)', 'Resource (15%)', 'Abandonment (8%)', 'Contract (10%)', 'Switch (5%)', 'Stage (7%)'],
                    datasets: [{
                        data: [35, 25, 15, 8, 10, 5, 7],
                        backgroundColor: ['#1976D2', '#388E3C', '#7B1FA2', '#C62828', '#F57C00', '#00838F', '#5D4037']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: { display: true, text: 'Typical ROV Composition' }
                    }
                }
            });

            // Example Chart
            const exampleCtx = document.getElementById('exampleChart').getContext('2d');
            new Chart(exampleCtx, {
                type: 'bar',
                data: {
                    labels: ['NPV', 'ROV_gross', 'Adjustments', 'ROV_net', 'TPV'],
                    datasets: [{
                        label: 'Value (M KRW)',
                        data: [79.56, 45.20, -12.35, 32.85, 112.41],
                        backgroundColor: ['#2196F3', '#4CAF50', '#F57C00', '#4CAF50', '#9C27B0']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        title: { display: true, text: 'Project R01: Value Breakdown' }
                    },
                    scales: {
                        y: { title: { display: true, text: 'Million KRW' } }
                    }
                }
            });
        });
    </script>
</body>
</html>
